<!DOCTYPE html>
<html lang="PT-BR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Ponte Literária | Página Inicial</title>

    <script src="./js/sessao.js"></script>

    <link rel="stylesheet" href="./css/feed.css">
    <link rel="stylesheet" href="./css/postagem.css">
    <link rel="stylesheet" href="./css/navbar.css">
    <link rel="stylesheet" href="./css/modal.css">
    <link rel="stylesheet" href="./css/perfil.css">

    <link rel="icon" href="./assets/icon/favicon2.ico">
    <link rel="preconnect" href="https://fonts.gstatic.com">
</head>

<script defer>
  function capturarIdPostagem(){
        const params = new URLSearchParams(window.location.search);
        
        return params.get('id')
    }

    function myPerfil(id){
      if(sessionStorage.ID_USUARIO == id){
        document.getElementById(`getSeguir`).style.display = 'none'
      }else {
        document.getElementById(`getAnalytics`).style.display = 'none'
        document.getElementById(`botaoEditarFoto`).style.display = 'none'

      }
    }

    const idUsuario = capturarIdPostagem()
    
  
    function renderizarFuncoesNaPagina(){
      
      validarSessao(), 
      getUsuario(sessionStorage.ID_USUARIO == idUsuario ? sessionStorage.ID_USUARIO : idUsuario), 
      obterPostagemPerfil(sessionStorage.ID_USUARIO == idUsuario ? sessionStorage.ID_USUARIO : idUsuario),
      obterSeguidores(sessionStorage.ID_USUARIO == idUsuario ? sessionStorage.ID_USUARIO : idUsuario),
      verificarSeguidor(idUsuario, sessionStorage.ID_USUARIO),
      myPerfil(idUsuario)
    }


</script>

<body onload="renderizarFuncoesNaPagina()">
    <a href="./criacao-artigo.html" style="position: fixed; right: 0; bottom: 0; padding: 1rem;">
      <img src="./assets/icon/adicionar.png" style="height: 3.5rem;" alt="">
  </a>
    <header style="z-index: 3;" id="div_navbarPerfil">
      <a href="./feed.html">
        <img src="./assets/icon/home.png" style="height: 2.5rem; margin: 2rem;" alt="">
        </a>
        <div class="container">
        <div class="containerInformacoesPerfil">
        
        <span id="quantidadeSeguidores"></span><span> Seguidor</span>
        <span id="quantidadeSeguindo"></span><span> Seguindo</span>
        </div>
        <div class="sessaoInformacaoUsuario">
        <div style="position: relative;">
        <img class="imgPerfil" src="./assets/imgs/usuarioTeste.jpg" alt="" id="fotoPreview">
        <div id="botaoEditarFoto" class="containerIconCamera">
        <img  class="" src="./assets/icon/camera.png" alt="" onclick="modalMudarFoto(sessionStorage.ID_USUARIO)">
        <input id="input_foto" type="file" src="" alt="" style="display: none;">
        </div>
        </div>
        <div class="nickname">
        <div style="display: flex; gap: 5%; justify-content: center; align-items: center;">
        <span id="nomeUsuario">Gabriel da Silva Sousa</span>
        
        </div>
        <span id="username">@gabrielSousa</span>
        </div>
        </div>
        
        <button id="getSeguir" class="botaoSeguir " onclick="seguirUsuario(idUsuario, sessionStorage.ID_USUARIO)">Seguir</button>
        
        
        
        
        <button id="getAnalytics" class="botaoSeguir" onclick="modalEditarPerfil(sessionStorage.ID_USUARIO)">Editar Perfil </button>
        
        
        <div class="containerInformacoesPerfil">
        <span id="quantidadeCurtidas"></span><span> Curtida</span>
        
        <span id="quantidadePublicacoes"></span><span> Publicação</span>
        
        
        </div>
        
        </div>
      
    </header>
    <div id="div_sidebar" class="sideBar" >
      <img class="logotipo" src="./assets/imgs/logotipo-pl.png" alt="">
    <ul class="corpoSidebar">
      <a href="./feed.html">
      <div class="topico-pagina">
      <img src="./assets/icon/home.png" alt="">
      <span>
      Página Inicial</span>
      </span>
      </a>
      </div>

      <a href="./index.html">
      <div class="topico-pagina">
      <img src="./assets/icon/projeto.png" alt="">
      <span>
      Projeto</span>
      </span>
      </div>
      </a>
      <div class="topico-pagina" onclick="abrirPerfil(sessionStorage.ID_USUARIO)">
      <img src="./assets/icon/usuario.png" alt="">
      <span >Perfil</span>
      </div>
      </span>
      
      <a href="./dashboard.html">
      <div class="topico-pagina">
      <img src="./assets/icon/analytics.png" alt="">
      <span>
      Analytics
      </span>
      </div>
      </a>
      
      
      <a onclick="limparSessao()">
      <div class="topico-pagina">
      <img src="./assets/icon/logout.png" alt="">
      <span>Sair</span>
      </div>
      </a>
   </ul>
    </div>
    <section class="sessaoFeed" id="sessaoPerfil">
      <div class="container" id="postagemPerfil" >
          
          
      </div>
  </section>

<div class="espacoModal">

</div>
<div class="modalAviso">

</div>

  </body>
<script>
    


</script>
<script src="./js/modal.js"></script>
<script src="./js/sessao.js"></script>
<script src="./js/postagem.js"></script>
<script src="./js/artigo.js"></script>
<script src="./js/interacao.js"></script>
<script src="./js/seguidor.js"></script>
<script src="./js/usuario.js"></script>
<script src="./js/foto.js"></script>
<script src="./js/components.js"></script>
<script src="./js/navegacaoPagina.js"></script>
<script src="./js/formataData.js"></script>
</html>